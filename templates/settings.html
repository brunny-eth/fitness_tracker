{% extends "base.html" %}

{% block content %}
<div class="section">
    <h2>User Settings</h2>
    
    <div class="settings-form">
        <div class="form-group">
            <label for="weight">Weight (lbs):</label>
            <input type="number" id="weight" value="{{ weight }}" step="0.1">
        </div>

        <div class="form-group">
            <label for="protein-ratio">Protein Ratio (g/kg of body weight):</label>
            <input type="number" id="protein-ratio" value="{{ ratio }}" step="0.1">
        </div>

        <button onclick="updateSettings()">Update Settings</button>
    </div>
</div>

<script>
function updateSettings() {
    const weight = document.getElementById('weight').value;
    const ratio = document.getElementById('protein-ratio').value;
    
    fetch('/update_settings', {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json',
        },
        body: JSON.stringify({ weight, ratio })
    })
    .then(response => response.json())
    .then(data => {
        if (data.message) {
            alert('Settings updated successfully');
            window.location.reload();
        }
    })
    .catch(error => {
        console.error('Error:', error);
        alert('Error updating settings');
    });
}
</script>
{% endblock %}